<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>Web KTV Demo</title>
</head>
<body style="background:#0b0f1a; color:#e8edf3; font-family:sans-serif; padding:20px;">

  <h1>ğŸ¤ Web KTV Demo</h1>
  <div id="status">â³ ç­‰å¾…è¼‰å…¥ä¸­â€¦</div>

  <!-- æ’­æ”¾å™¨å®¹å™¨ -->
  <div id="player" style="margin-top:12px; width:100%; max-width:640px; aspect-ratio:16/9;"></div>

  <!-- è²¼ä¸Š YouTube é€£çµ -->
  <div style="margin-top:12px;">
    <input id="url" placeholder="è²¼ä¸Š YouTube é€£çµ" style="width:60%;" />
    <button onclick="loadVideo()">æ’­æ”¾</button>
  </div>

  <!-- è¼‰å…¥ YouTube IFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let player;
    let isReady = false;

    function onYouTubeIframeAPIReady() {
      console.log("âœ… YouTube API å·²è¼‰å…¥");
      player = new YT.Player("player", {
        height: "360",
        width: "640",
        videoId: "", // é è¨­ç©ºç™½
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
      });
    }

    function onPlayerReady() {
      isReady = true;
      document.getElementById("status").innerText = "âœ… æ’­æ”¾å™¨å·²æº–å‚™å®Œæˆ";
    }

    function onPlayerStateChange(e) {
      console.log("æ’­æ”¾å™¨ç‹€æ…‹æ”¹è®Šï¼š", e.data);
    }

    function loadVideo() {
      if (!isReady) {
        alert("æ’­æ”¾å™¨å°šæœªæº–å‚™å¥½ï¼Œè«‹ç¨å€™å†è©¦");
        return;
      }
      const url = document.getElementById("url").value.trim();
      const match = url.match(/(?:v=|youtu\.be\/)([0-9A-Za-z_-]{11})/);
      if (!match) {
        alert("ç„¡æ³•è§£æ YouTube é€£çµ");
        return;
      }
      player.loadVideoById(match[1]);
    }
  </script>
</body>
</html>
