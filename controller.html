<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>KTV 點歌端 (Controller)</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>KTV 點歌端 (Controller)</h1>
    <div>
      <label>輸入 Host ID：</label>
      <input id="hostIdInput" placeholder="ktv-host" value=""/>
      <button onclick="connectHost()">連線</button>
    </div>
    <div>
      <label>輸入名稱：</label>
      <input id="userName" placeholder="匿名"/>
    </div>
    <div id="connStatus">尚未連線</div>
  </header>

  <section class="card">
    <h3>點歌</h3>
    <div>
      <input id="songTitle" placeholder="歌曲名稱"/>
      <input id="songVideoId" placeholder="YouTube 影片 ID"/>
      <button onclick="sendSong()">送出</button>
    </div>
  </section>

  <section class="card">
    <h3>播放佇列</h3>
    <div id="queue" class="list"></div>
  </section>

  <section class="card">
    <h3>歷史紀錄</h3>
    <div id="historyList" class="list"></div>
  </section>

  <section class="card">
    <h3>訊息牆</h3>
    <div id="wallList" class="list"></div>
    <div style="margin-top:8px;">
      <input id="emojiInput" placeholder="😀" maxlength="2"/>
      <button onclick="sendFeedback()">送出表情</button>
    </div>
  </section>

  <section class="card">
    <h3>排行榜</h3>
    <div id="rankingList" class="list"></div>
  </section>

  <section class="card">
    <h3>進度</h3>
    <progress id="progressBar" value="0" max="100" style="width:100%;"></progress>
    <div id="timeInfo">0:00 / 0:00</div>
  </section>

  <!-- 外部資源 -->
  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
  <script src="controller.js"></script>
  <script>
    // 自動讀取網址參數 ?host=
    const params = new URLSearchParams(window.location.search);
    const hostParam = params.get("host");
    if(hostParam){
      document.getElementById("hostIdInput").value = hostParam;
      window.addEventListener("load", ()=> connectHost());
    }
  </script>
</body>
</html>
